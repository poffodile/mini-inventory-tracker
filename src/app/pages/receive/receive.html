<div class="p-6 space-y-4">
  <h1 class="text-2xl font-bold">Goods Receipt Form</h1>

  <form (ngSubmit)="submitForm()" class="space-y-4">
    <div>
      <label class="block font-semibold">Product</label>
      <select
        [(ngModel)]="productId"
        name="productId"
        class="border px-2 py-1 w-full"
        required
        title="Select a product"
      >
        <option value="" disabled selected>Select a product</option>
        <option *ngFor="let product of products" [value]="product.id">
          {{ product.name }} ({{ product.id }})
        </option>
      </select>
    </div>

    <div>
      <label class="block font-semibold">Quantity Received</label>
      <input
        type="number"
        [(ngModel)]="qty"
        name="quantity"
        class="border px-2 py-1 w-full"
        required
        placeholder="Enter quantity"
        title="Quantity"
      />
    </div>

    <div>
      <label class="block font-semibold">Location</label>
      <select
        [(ngModel)]="locationId"
        name="locationId"
        class="border px-2 py-1 w-full"
        required
        title="Select a location"
      >
        <option value="" disabled selected>Select a location</option>
        <option *ngFor="let location of locations" [value]="location.id">
          {{ location.name }} ({{ location.id }})
        </option>
      </select>
    </div>

    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Receive Goods</button>
  </form>
</div>

<!-- Summary Table of Received Goods -->
<div class="mt-8">
  <h2 class="text-xl font-semibold mb-2">Received Goods Summary</h2>

  <table class="min-w-full border border-gray-300 divide-y divide-gray-200">
    <thead class="bg-gray-100">
      <tr>
        <th class="px-4 py-2">Product ID</th>
        <th class="px-4 py-2">Quantity</th>
        <th class="px-4 py-2">Location</th>
        <th class="px-4 py-2">Timestamp</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of receivedItems" class="hover:bg-gray-50">
        <td class="px-4 py-2">{{ item.productId }}</td>
        <td class="px-4 py-2">{{ item.qty }}</td>
        <td class="px-4 py-2">{{ item.locationId }}</td>
        <td class="px-4 py-2">{{ item.timestamp | date : 'short' }}</td>
      </tr>
    </tbody>
  </table>

  @if (receivedItems.length === 0) {
  <p class="text-gray-500 mt-2">No goods have been received yet.</p>
  }
</div>
